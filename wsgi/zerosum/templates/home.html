{% extends "base.html" %}

{% block main %}
<!--h3>Recent Activity</h3>

<table class="table">
    <thead>
        <th>From/to</th>
        <th>Subject</th>
        <th style="text-align:right">Amount</th>
        <th>Created</th>
    </thead>
    {% for owe in owes %}
    <tr>
        <td>{{ owe.user_name }}</td>
        <td>{{ owe.subject }}</td>
        <td style="text-align:right" class="{{ owe.amount | plusminus }}">{{ owe.amount }} {{owe.currency }}</td>
        <td>{{ owe.created | dt }}</td>
    </tr>
    {% endfor %}
</table-->

<h3>Current Balances</h3>

<table class="table">
    <thead>
        <th>From/to</th>
        <th style="text-align:right">Balance</th>
        <th>Items</th>
    </thead>
    {% for b in balances %}
    <tr>
        <td>{{ b.user_name }}</td>
        <td style="text-align:right" class="{{ b.amount | plusminus }}">{{ b.amount }} {{ b.currency }}</td>
        <td>
            {% for d in details[b.user_id] %}
                <span class="{{ d.amount | plusminus }} badge new">{{ d.subject }} {{ d.amount }}</span>
                {%- if not loop.last %} &mdash; {% endif %}
            {% endfor %}
        </td>
    </tr>
    {% endfor %}
</table>

<h3>New Owe</h3>

<form role="form" class="form-inline" method="POST" action="new_owe">
    I owe
    <input name="amount" type="number" step="0.01" min="0" placeholder="1.00"
        class="form-control" style="width: 100px"/> &euro;
    <input name="currency" type="hidden" value="EUR">
    to
    <input name="creditor" type="email" class="form-control" list="emails" placeholder="friend@example.com"
        style="width:250px">
    <datalist id="emails">
        <option value="karl42@gmail.com">
        <option value="maria.schuldt89@gmail.com">
    </datalist>
    for
    <input name="subject" class="form-control" placeholder="subject" style="width:250px">
    <button type="submit" class="btn btn-primary">Confirm</button>
</form>
{% endblock %}
